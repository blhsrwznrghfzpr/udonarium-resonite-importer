<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
    />
    <title>Udonarium Resonite Importer</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <div class="locale-switcher">
          <label for="locale-select">Language</label>
          <select id="locale-select" aria-label="Language">
            <option value="ja">日本語</option>
            <option value="en">English</option>
          </select>
        </div>
        <h1>Udonarium Resonite Importer</h1>
        <p class="subtitle">Udonarium save data importer for Resonite</p>
      </header>

      <main>
        <section class="card" id="main-controls">
          <h2 data-i18n="gui.mainControlsTitle">インポート設定</h2>
          <div class="card-body">
            <div class="control-group file-control">
              <div class="file-select" id="file-drop-area">
                <input type="text" id="file-path" placeholder="ファイルを選択してください..." />
                <button id="select-file-btn" class="btn btn-primary">参照...</button>
              </div>
            </div>
            <div class="control-group port-inline">
              <label for="port" data-i18n="gui.resoniteLinkPort">ResoniteLinkポート</label>
              <input type="number" id="port" min="1" max="65535" />
              <button
                type="button"
                id="port-help-btn"
                class="help-icon"
                aria-label="ResoniteLinkポートのヘルプ"
                aria-expanded="false"
              >
                ?
              </button>
            </div>
            <div id="port-help-panel" class="help-panel" style="display: none">
              <strong data-i18n="gui.portHelpTitle">ResoniteLinkの設定方法</strong>
              <ol>
                <li data-i18n="gui.portHelpStep1">自分がホストのワールドを開く</li>
                <li data-i18n="gui.portHelpStep2">セッションタブで「ResoniteLinkを有効化」</li>
                <li data-i18n="gui.portHelpStep3">ResoniteLinkのポート番号を入力</li>
              </ol>
            </div>
            <div class="control-group" id="import-controls">
              <button id="import-btn" class="btn btn-success btn-large" disabled>
                Resoniteにインポート
              </button>
            </div>
            <div class="hint-row">
              <p class="hint" data-i18n="gui.settingsHint">
                Resoniteを起動し、ResoniteLinkを有効にしてください。
              </p>
              <button
                type="button"
                id="advanced-open-btn"
                class="btn"
                data-i18n="gui.advancedOptions"
                aria-controls="advanced-section"
                aria-expanded="false"
              >
                高度なオプション
              </button>
            </div>
          </div>
        </section>

        <section class="card" id="advanced-section" style="display: none">
          <h2 data-i18n="gui.advancedOptionsTitle">高度なオプション</h2>
          <button type="button" id="advanced-close-btn" class="card-close-btn" aria-label="Close">
            x
          </button>
          <div class="card-body">
            <div class="settings-grid">
              <div class="setting-item">
                <label for="host" data-i18n="gui.host">ホスト</label>
                <input type="text" id="host" value="localhost" />
              </div>
              <div class="setting-item">
                <label for="root-scale" data-i18n="gui.rootScale">ルートスケール:</label>
                <div class="root-scale-control">
                  <input type="range" id="root-scale" min="0" max="6" step="1" value="3" />
                  <input
                    type="number"
                    id="root-scale-direct"
                    min="0"
                    max="100"
                    step="0.1"
                    value="1"
                  />
                </div>
              </div>
              <div class="setting-item setting-item-checkbox">
                <label
                  for="locked-terrain-character-collider"
                  data-i18n="gui.lockedTerrainCharacterCollider"
                >
                  テーブルと固定した地形にコライダーを付ける
                </label>
                <input type="checkbox" id="locked-terrain-character-collider" />
              </div>
              <div class="setting-item">
                <label
                  for="semi-transparent-image-blend-mode"
                  data-i18n="gui.semiTransparentImageBlendMode"
                >
                  半透明画像の描画方式
                </label>
                <select id="semi-transparent-image-blend-mode">
                  <option value="Cutout" data-i18n="gui.blendModeCutout">Cutout</option>
                  <option value="Alpha" data-i18n="gui.blendModeAlpha">Alpha</option>
                </select>
              </div>
            </div>
          </div>
        </section>

        <section class="card" id="import-log" style="display: none">
          <h2 data-i18n="gui.importLogTitle">インポート実行ログ</h2>
          <div class="card-body">
            <div id="progress-area" style="display: none">
              <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
              </div>
              <p id="progress-text">準備中...</p>
            </div>
            <div id="import-result" style="display: none"></div>
          </div>
        </section>
      </main>

      <footer>
        <p>Udonarium Resonite Importer v1.0.0</p>
      </footer>
    </div>
  </body>
</html>
